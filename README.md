# Sirius Achievements

Веб-приложение для управления достижениями студентов, включающее систему геймификации, рейтинговые таблицы и инструменты модерации загружаемых документов. Проект построен на современном стеке Python с использованием архитектуры REST API и серверного рендеринга шаблонов.

## Описание проекта

Система позволяет студентам загружать подтверждения своих достижений (грамоты, сертификаты), которые проходят процесс модерации администраторами или модераторами. На основе подтвержденных достижений формируется глобальный рейтинг студентов.

### Основные возможности

* **Аутентификация и Авторизация:** Регистрация, вход, восстановление пароля, система ролей (Гость, Студент, Модератор, Супер-Админ).
* **Управление достижениями:** Загрузка файлов (изображения, PDF), указание метаданных (категория, уровень).
* **Модерация:** Интерфейс для проверки загруженных документов с возможностью принятия или отклонения (с указанием причины).
* **Геймификация:** Автоматический подсчет баллов за достижения, глобальный лидерборд (рейтинг) студентов.
* **Личный кабинет:** Просмотр статуса своих заявок, статистика и редактирование профиля.
* **Админ-панель:** Управление пользователями (смена ролей, блокировка), просмотр статистики системы, управление контентом.

## Технологический стек

### Бэкенд
* **Язык:** Python 3.10+
* **Фреймворк:** FastAPI (асинхронный веб-фреймворк)
* **Сервер приложений:** Uvicorn
* **База данных:** PostgreSQL (основная), SQLite (для разработки/тестов)
* **ORM:** SQLAlchemy (асинхронная работа с БД)
* **Миграции:** Alembic
* **Валидация данных:** Pydantic

### Фронтенд
* **Шаблонизатор:** Jinja2 (Server Side Rendering)
* **CSS Фреймворк:** Tailwind CSS (стилизация интерфейса)
* **JS Фреймворк:** Alpine.js (легковесная реактивность на клиенте)
* **Графики:** Chart.js

### Инфраструктура
* **Контейнеризация:** Docker, Docker Compose
* **Тестирование:** Pytest

## Установка и запуск

Ниже приведены инструкции по развертыванию проекта на новом устройстве. Рекомендуемый способ — использование Docker.

### Предварительные требования
* Установленный Git
* Docker и Docker Compose (для запуска в контейнерах)
* Или Python 3.10+ (для локального запуска)

### Способ 1: Запуск через Docker (Рекомендуемый)

Этот способ автоматически настроит базу данных и приложение в изолированных контейнерах.

1.  **Клонирование репозитория:**
    Откройте терминал и выполните команду:
    ```bash
    git clone <ссылка_на_ваш_репозиторий>
    cd <папка_проекта>
    ```

2.  **Настройка переменных окружения:**
    Создайте файл `.env` в корне проекта на основе примера:
    ```bash
    cp .env.example .env
    ```
    Откройте файл `.env` и убедитесь, что настройки базы данных соответствуют тем, что указаны в `docker-compose.yml` (обычно менять ничего не нужно для первого запуска).

3.  **Сборка и запуск контейнеров:**
    Выполните команду:
    ```bash
    docker compose up --build -d
    ```

4.  **Применение миграций:**
    Чтобы создать таблицы в базе данных, выполните миграции внутри контейнера:
    ```bash
    docker compose exec app alembic upgrade head
    ```

5.  **Заполнение начальными данными (Сидеры):**
    Если необходимо создать начальных пользователей или данные:
    ```bash
    docker compose exec app python app/seeders/main.py
    ```

Приложение будет доступно по адресу: http://localhost:8000

---

### Способ 2: Локальный запуск (Без Docker)

Используйте этот способ для разработки, если не хотите использовать Docker.

1.  **Клонирование репозитория:**
    ```bash
    git clone <ссылка_на_ваш_репозиторий>
    cd <папка_проекта>
    ```

2.  **Создание виртуального окружения:**
    ```bash
    python -m venv .venv
    # Активация для Windows:
    .venv\Scripts\activate
    # Активация для Linux/macOS:
    source .venv/bin/activate
    ```

3.  **Установка зависимостей:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Настройка переменных окружения:**
    Создайте файл `.env` и настройте его. Для локального запуска с SQLite убедитесь, что DATABASE_URL настроен соответствующим образом (например, `sqlite+aiosqlite:///./db.sqlite3`).

5.  **Применение миграций:**
    ```bash
    alembic upgrade head
    ```

6.  **Запуск сервера:**
    ```bash
    uvicorn main:app --reload
    ```

Приложение будет доступно по адресу: http://127.0.0.1:8000

## Структура проекта

* `app/` - Основной код приложения
    * `infrastructure/` - Конфигурация БД, логгера, работа с файлами
    * `migrations/` - Файлы миграций базы данных (Alembic)
    * `models/` - Модели базы данных (SQLAlchemy)
    * `repositories/` - Слой работы с данными (CRUD операции)
    * `routers/` - Маршрутизаторы (контроллеры) для обработки HTTP запросов
    * `schemas/` - Pydantic схемы для валидации данных
    * `services/` - Бизнес-логика приложения
    * `seeders/` - Скрипты для начального наполнения БД
    * `tests/` - Тесты
* `static/` - Статические файлы (CSS, JS, изображения, загруженные файлы)
* `templates/` - HTML шаблоны (Jinja2)
* `main.py` - Точка входа в приложение
* `docker-compose.yml` - Конфигурация Docker сервисов

## Полезные команды


* **Создание новой миграции:** `alembic revision --autogenerate -m "название_изменения"`
* **Применение миграций:** `alembic upgrade head`
* **Откат миграции:** `alembic downgrade -1`
* **Запуск тестов:** `pytest`